<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin API - Sauron Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="index.html" class="text-xl font-bold text-purple-600">‚Üê Back to Sauron</a>
                <div class="text-sm text-gray-600">Admin API</div>
            </div>
        </div>
    </nav>

    <div class="max-w-6xl mx-auto px-4 py-12">
        <h1 class="text-4xl font-bold text-gray-800 mb-8">Admin API Reference</h1>
        
        <!-- Authentication -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Authentication</h2>
            
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <p class="text-gray-600 mb-4">
                    All admin endpoints require authentication using the admin key configured in your environment variables.
                </p>
                
                <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre># Using header authentication
curl -X GET https://your-domain.com/admin/cleanup/status \
  -H "X-Admin-Key: your_admin_key_here"

# Using JSON body authentication
curl -X POST https://your-domain.com/admin/cleanup \
  -H "Content-Type: application/json" \
  -d '{
    "admin_key": "your_admin_key_here",
    "operations": ["logs"]
  }'</pre>
                </div>
            </div>
        </section>

        <!-- Cleanup API -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Cleanup Operations</h2>
            
            <div class="space-y-6">
                <!-- POST /admin/cleanup -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /admin/cleanup</h3>
                    <p class="text-gray-600 mb-4">Execute cleanup operations with fine-grained control</p>
                    
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <h4 class="font-semibold mb-2">Available Operations:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>logs</code> - Remove old log files</li>
                                <li><code>database</code> - Clean old user_links records</li>
                                <li><code>credentials</code> - Clear secure memory storage</li>
                                <li><code>firestore</code> - Remove old cloud documents</li>
                                <li><code>all</code> - Execute all cleanup operations</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">Request Parameters:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>admin_key</code> - Authentication key</li>
                                <li><code>operations</code> - Array of operations</li>
                                <li><code>retention_days</code> - Keep data newer than N days</li>
                                <li><code>dry_run</code> - Preview mode (optional)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/cleanup
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "operations": ["logs", "database"],
  "retention_days": 30,
  "dry_run": false
}

Response:
{
  "success": true,
  "operations": {
    "logs": {
      "success": true,
      "items_removed": 15,
      "size_freed": 2048576,
      "details": "Processed 20 log files"
    },
    "database": {
      "success": true,
      "items_removed": 150,
      "size_freed": 15000,
      "details": "Found 150 old records for cleanup"
    }
  },
  "total_size_freed": 2063576,
  "message": "Cleanup completed. Freed 2.0 MB across 2 operations",
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                </div>

                <!-- GET /admin/cleanup/status -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">GET /admin/cleanup/status</h3>
                    <p class="text-gray-600 mb-4">Get current system status and cleanup statistics</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>GET /admin/cleanup/status
X-Admin-Key: your_admin_key_here

Response:
{
  "database": {
    "user_links": 1250,
    "config": 1,
    "banned_ips": 45
  },
  "logs": {
    "total_files": 12,
    "total_size": "15.2 MB"
  },
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Customer Risk Management -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Customer Risk Management</h2>
            
            <div class="space-y-6">
                <!-- POST /admin/risk -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /admin/risk</h3>
                    <p class="text-gray-600 mb-4">Customer risk analysis and threat detection endpoint</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/risk
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "action": "analyze",
  "customer_id": "optional_customer_id"
}

Response:
{
  "success": true,
  "risk_analysis": {
    "threat_level": "medium",
    "suspicious_patterns": ["high_frequency_requests", "unusual_geo_locations"],
    "recommendations": ["enable_rate_limiting", "geo_blocking"]
  },
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                </div>

                <!-- GET /admin/metrics -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">GET /admin/metrics</h3>
                    <p class="text-gray-600 mb-4">Get comprehensive customer metrics and analytics</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>GET /admin/metrics
X-Admin-Key: your_admin_key_here

Response:
{
  "success": true,
  "metrics": {
    "total_customers": 150,
    "active_sessions": 23,
    "total_requests_24h": 15000,
    "avg_response_time": "120ms",
    "error_rate": "0.5%"
  },
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Kill Switch Management -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">üî¥ Kill Switch System</h2>
            
            <div class="space-y-6">
                <!-- POST /admin/killswitch -->
                <div class="bg-white p-6 rounded-lg shadow-sm border border-red-200">
                    <h3 class="text-lg font-semibold mb-4 text-red-600">POST /admin/killswitch</h3>
                    <p class="text-gray-600 mb-4">‚ö†Ô∏è <strong>CRITICAL:</strong> Emergency kill switch for immediate system destruction</p>
                    
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <h4 class="font-semibold mb-2">Destruction Levels:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>1</code> - Memory purge only</li>
                                <li><code>2</code> - Memory + data obliteration</li>
                                <li><code>3</code> - System corruption</li>
                                <li><code>4</code> - Hardware-level destruction</li>
                                <li><code>5</code> - Stealth exit simulation</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">Required Parameters:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>admin_key</code> - Admin authentication</li>
                                <li><code>confirmation_code</code> - Must be "OMEGA-DESTROY"</li>
                                <li><code>destruction_level</code> - Level 1-5</li>
                                <li><code>reason</code> - Audit trail reason</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-gray-900 text-red-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/killswitch
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "vps_id": "",  // Empty = all VPS instances
  "destruction_level": 3,
  "delay_seconds": 30,
  "reason": "Law enforcement detected",
  "confirmation_code": "OMEGA-DESTROY"
}

Response:
{
  "success": true,
  "vps_id": "",
  "stage": "INITIATION",
  "message": "Kill switch activated - destruction imminent",
  "timestamp": "2024-01-15T10:30:00Z",
  "time_to_live": 30
}</pre>
                    </div>
                    
                    <div class="mt-4 p-4 bg-red-50 border-l-4 border-red-400">
                        <p class="text-red-700 text-sm font-semibold">
                            ‚ö†Ô∏è WARNING: This endpoint permanently destroys data and systems. Use only in emergency situations.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Fleet Management -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">üöÅ Fleet Management</h2>
            
            <div class="space-y-6">
                <!-- GET /fleet/register -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">GET /fleet/register</h3>
                    <p class="text-gray-600 mb-4">List all registered VPS instances in the fleet</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>GET /fleet/register
X-Admin-Key: your_admin_key_here

Response:
{
  "success": true,
  "instances": [
    {
      "vps_id": "vps-abc123",
      "ip": "192.168.1.100",
      "domain": "secure.company.com",
      "admin_domain": "admin.company.com",
      "status": "active",
      "last_seen": "2024-01-15T10:29:00Z",
      "version": "v2.1.0",
      "location": "US-East",
      "registered_at": "2024-01-10T08:00:00Z"
    }
  ],
  "fleet_stats": {
    "total_vps": 5,
    "active_vps": 4
  },
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                </div>

                <!-- POST /fleet/register -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /fleet/register</h3>
                    <p class="text-gray-600 mb-4">Register or update a VPS instance in the fleet</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /fleet/register
Content-Type: application/json
X-VPS-ID: vps-abc123

{
  "ip": "192.168.1.100",
  "domain": "secure.company.com",
  "admin_domain": "admin.company.com",
  "version": "v2.1.0",
  "location": "US-East"
}

Response:
{
  "success": true,
  "vps_id": "vps-abc123",
  "status": "registered",
  "next_heartbeat": 300,
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                </div>

                <!-- POST /fleet/command -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /fleet/command</h3>
                    <p class="text-gray-600 mb-4">Send commands to specific VPS instances</p>
                    
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <h4 class="font-semibold mb-2">Available Commands:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>script</code> - Deploy/update injection scripts</li>
                                <li><code>config</code> - Update configuration</li>
                                <li><code>restart</code> - Restart services</li>
                                <li><code>status</code> - Get system status</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">Command Parameters:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>admin_key</code> - Authentication key</li>
                                <li><code>vps_id</code> - Target VPS ID</li>
                                <li><code>command</code> - Command type</li>
                                <li><code>payload</code> - Command data</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /fleet/command
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "vps_id": "vps-abc123",
  "command": "script",
  "payload": {
    "script_type": "injection",
    "content": "updated_script_content"
  },
  "timeout": 30
}

Response:
{
  "success": true,
  "vps_id": "vps-abc123",
  "command": "script",
  "result": {
    "message": "Script updated successfully",
    "status": "deployed"
  },
  "duration": "2.5s",
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                </div>

                <!-- POST /vps/command -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /vps/command</h3>
                    <p class="text-gray-600 mb-4">VPS agent endpoint for receiving commands from fleet master</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /vps/command
Content-Type: application/json

{
  "command": "script",
  "payload": {
    "script_type": "injection",
    "content": "updated_script_content"
  },
  "source": "fleet-master"
}

Response:
{
  "success": true,
  "vps_id": "vps-abc123",
  "command": "script",
  "result": {
    "message": "Command executed successfully",
    "status": "completed"
  },
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                    
                    <div class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-400">
                        <p class="text-blue-700 text-sm">
                            üí° <strong>Note:</strong> This endpoint is used by VPS agents to receive commands from the fleet master. It's automatically called when commands are distributed via /fleet/command.
                        </p>
                    </div>
                </div>

                <!-- POST /vps/killswitch -->
                <div class="bg-white p-6 rounded-lg shadow-sm border border-red-200">
                    <h3 class="text-lg font-semibold mb-4 text-red-600">POST /vps/killswitch</h3>
                    <p class="text-gray-600 mb-4">VPS agent kill switch endpoint for receiving destruction commands</p>
                    
                    <div class="bg-gray-900 text-red-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /vps/killswitch
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "destruction_level": 3,
  "delay_seconds": 0,
  "reason": "Emergency destruction command"
}

Response:
{
  "success": true,
  "vps_id": "vps-abc123",
  "stage": "RECEIVED",
  "message": "Kill switch command received",
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                    
                    <div class="mt-4 p-4 bg-red-50 border-l-4 border-red-400">
                        <p class="text-red-700 text-sm font-semibold">
                            ‚ö†Ô∏è WARNING: This endpoint executes immediate destruction upon receiving valid commands. Used by fleet-wide kill switch operations.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Script Management -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">üìú Script Management</h2>
            
            <div class="space-y-6">
                <!-- GET /admin/scripts -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">GET /admin/scripts</h3>
                    <p class="text-gray-600 mb-4">List available scripts with categories and status</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>GET /admin/scripts?category=build
X-Admin-Key: your_admin_key_here

Response:
{
  "scripts": [
    {
      "name": "build-release.sh",
      "description": "Build and package release",
      "category": "build",
      "available": true,
      "path": "./scripts/build-release.sh"
    }
  ],
  "count": 14,
  "categories": ["build", "install", "test", "deployment", "management", "maintenance", "security", "documentation", "update"],
  "timestamp": "2024-01-15T10:30:00Z"
}</pre>
                    </div>
                </div>

                <!-- POST /admin/scripts -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /admin/scripts</h3>
                    <p class="text-gray-600 mb-4">Execute shell scripts remotely with proper validation</p>
                    
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <h4 class="font-semibold mb-2">Available Scripts:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>build-release.sh</code> - Build and package release</li>
                                <li><code>verify-installation.sh</code> - Verify installation status</li>
                                <li><code>configure-env.sh</code> - Interactive configuration wizard</li>
                                <li><code>fleet-master.sh</code> - Fleet master controller setup</li>
                                <li><code>fleet-agent.sh</code> - Fleet agent configuration</li>
                                <li><code>test-firebase.sh</code> - Test Firebase integration</li>
                                <li><code>manage-sauron-pro.sh</code> - Main management interface</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">Script Categories:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>build</code> - Build and packaging scripts</li>
                                <li><code>install</code> - Installation and setup</li>
                                <li><code>test</code> - Testing and validation</li>
                                <li><code>deployment</code> - Deployment automation</li>
                                <li><code>management</code> - System management</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/scripts
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "script": "verify-installation.sh",
  "arguments": ["--verbose", "--check-dependencies"],
  "working_dir": "/opt/sauron",
  "environment": {
    "NODE_ENV": "production",
    "DEBUG": "true"
  },
  "dry_run": false
}

Response:
{
  "success": true,
  "script": "verify-installation.sh",
  "exit_code": 0,
  "output": "Installation verified successfully\nAll dependencies found\nConfiguration valid",
  "duration": "2.34s",
  "timestamp": "2024-01-15T10:30:00Z",
  "dry_run": false
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dead Man's Switch -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">‚è∞ Dead Man's Switch</h2>
            
            <div class="space-y-6">
                <!-- GET /admin/deadmans -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">GET /admin/deadmans</h3>
                    <p class="text-gray-600 mb-4">Get current dead man's switch configuration and status</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>GET /admin/deadmans
Authorization: Bearer your_admin_key_here

Response:
{
  "enabled": true,
  "check_interval": "5m0s",
  "master_timeout": "15m0s",
  "last_heartbeat": "2024-01-15T10:25:00Z",
  "auto_destruct": false,
  "destruction_level": 3
}</pre>
                    </div>
                </div>

                <!-- POST /admin/deadmans -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /admin/deadmans</h3>
                    <p class="text-gray-600 mb-4">Configure automated kill switch based on operator activity</p>
                    
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <h4 class="font-semibold mb-2">Configuration Parameters:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>enabled</code> - Enable/disable the dead man's switch</li>
                                <li><code>check_interval</code> - How often to check (duration)</li>
                                <li><code>master_timeout</code> - Timeout before activation</li>
                                <li><code>auto_destruct</code> - Auto-activate kill switch</li>
                                <li><code>destruction_level</code> - Kill switch level (1-5)</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">Time Formats:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>"5m"</code> - 5 minutes</li>
                                <li><code>"1h"</code> - 1 hour</li>
                                <li><code>"30s"</code> - 30 seconds</li>
                                <li><code>"24h"</code> - 24 hours</li>
                                <li>Go duration format supported</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/deadmans
Authorization: Bearer your_admin_key_here
Content-Type: application/json

{
  "enabled": true,
  "check_interval": "5m",
  "master_timeout": "15m",
  "auto_destruct": false,
  "destruction_level": 3
}

Response:
{
  "success": true
}</pre>
                    </div>
                </div>

                <!-- POST /admin/deadmans/heartbeat -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /admin/deadmans/heartbeat</h3>
                    <p class="text-gray-600 mb-4">Send heartbeat signal to reset the dead man's switch timer</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/deadmans/heartbeat
Authorization: Bearer your_admin_key_here

Response:
{
  "success": true,
  "timestamp": "2024-01-15T10:30:00Z",
  "status": "heartbeat_acknowledged"
}</pre>
                    </div>
                    
                    <div class="mt-4 p-4 bg-yellow-50 border-l-4 border-yellow-400">
                        <p class="text-yellow-700 text-sm">
                            üí° <strong>Note:</strong> Regular heartbeat signals prevent automatic destruction. If no heartbeat is received within the configured timeout, the system will automatically activate the kill switch if auto_destruct is enabled.
                        </p>
                    </div>
                </div>
            </div>
        </section>
                    </div>
                </div>

                <!-- POST /admin/deadmans/heartbeat -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /admin/deadmans/heartbeat</h3>
                    <p class="text-gray-600 mb-4">Send heartbeat to prevent dead man's switch activation</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/deadmans/heartbeat
Content-Type: application/json

{
  "admin_key": "your_admin_key_here"
}

Response:
{
  "success": true,
  "heartbeat_recorded": "2024-01-15T10:30:00Z",
  "next_required": "2024-01-16T10:30:00Z",
  "time_remaining": "23h 59m 30s"
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Decoy System Management -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Intelligent Decoy System</h2>
            
            <div class="space-y-6">
                <!-- POST /admin/decoy -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /admin/decoy</h3>
                    <p class="text-gray-600 mb-4">Control the intelligent decoy traffic generation system</p>
                    
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <h4 class="font-semibold mb-2">Available Actions:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>start</code> - Start decoy traffic generation</li>
                                <li><code>stop</code> - Stop decoy traffic generation</li>
                                <li><code>configure</code> - Update decoy settings</li>
                                <li><code>reset</code> - Reset decoy system</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">Configuration Options:</h4>
                            <ul class="text-sm space-y-1">
                                <li><code>intensity</code> - Traffic intensity level (1-10)</li>
                                <li><code>pattern</code> - Traffic pattern type</li>
                                <li><code>targets</code> - Target endpoints</li>
                                <li><code>schedule</code> - Timing configuration</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/decoy
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "action": "configure",
  "config": {
    "intensity": 5,
    "pattern": "random",
    "enabled": true
  }
}

Response:
{
  "success": true,
  "decoy_status": "configured",
  "current_config": {
    "intensity": 5,
    "pattern": "random",
    "enabled": true,
    "last_updated": "2024-01-15T10:30:00Z"
  }
}</pre>
                    </div>
                </div>

                <!-- GET /admin/decoy/status -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">GET /admin/decoy/status</h3>
                    <p class="text-gray-600 mb-4">Get current decoy system status and statistics</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>GET /admin/decoy/status
X-Admin-Key: your_admin_key_here

Response:
{
  "success": true,
  "decoy_system": {
    "status": "active",
    "intensity": 5,
    "pattern": "random",
    "requests_generated_24h": 12500,
    "effectiveness_score": 85,
    "last_activity": "2024-01-15T10:29:45Z"
  },
  "statistics": {
    "total_decoy_requests": 125000,
    "detection_evasion_rate": "94%",
    "system_load_impact": "minimal"
  }
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Security & Utility Endpoints -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">üîí Security & Utility</h2>
            
            <div class="space-y-6">
                <!-- POST /admin/turnstile -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">POST /admin/turnstile</h3>
                    <p class="text-gray-600 mb-4">Cloudflare Turnstile verification for enhanced security</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>POST /admin/turnstile
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "token": "0.turnstile_token_here"
}

Response:
{
  "success": true,
  "verified": true,
  "challenge_ts": "2024-01-15T10:30:00Z",
  "hostname": "your-domain.com"
}</pre>
                    </div>
                </div>

                <!-- GET/POST /admin/cleanup/config -->
                <div class="bg-white p-6 rounded-lg shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4 text-purple-600">GET/POST /admin/cleanup/config</h3>
                    <p class="text-gray-600 mb-4">Configure automatic log cleanup and retention policies</p>
                    
                    <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>GET /admin/cleanup/config
X-Admin-Key: your_admin_key_here

Response:
{
  "enabled": true,
  "cleanup_interval": "1h",
  "retention_days": 7,
  "last_cleanup": "2024-01-15T09:30:00Z",
  "cleanup_targets": ["logs", "temp", "cache"]
}

POST /admin/cleanup/config
Content-Type: application/json

{
  "admin_key": "your_admin_key_here",
  "enabled": true,
  "cleanup_interval": "2h",
  "retention_days": 14
}

Response:
{
  "success": true,
  "config_updated": true,
  "next_cleanup": "2024-01-15T12:30:00Z"
}</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Statistics and Monitoring -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Statistics and Monitoring</h2>
            
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <h3 class="text-lg font-semibold mb-4">GET /stats</h3>
                <p class="text-gray-600 mb-4">Get statistics for a specific slug (requires slug parameter)</p>
                
                <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre>GET /stats?slug=your-slug-here

Response:
{
  "visits": 150,
  "logs": 89,
  "valid": 23,
  "invalid": 12
}</pre>
                </div>
                
                <div class="mt-4 grid md:grid-cols-4 gap-4">
                    <div class="bg-blue-50 p-3 rounded-lg text-center">
                        <div class="text-lg font-bold text-blue-600">Visits</div>
                        <div class="text-sm text-blue-700">Total unique visitors</div>
                    </div>
                    
                    <div class="bg-green-50 p-3 rounded-lg text-center">
                        <div class="text-lg font-bold text-green-600">Logs</div>
                        <div class="text-sm text-green-700">Events logged</div>
                    </div>
                    
                    <div class="bg-green-50 p-3 rounded-lg text-center">
                        <div class="text-lg font-bold text-green-600">Valid</div>
                        <div class="text-sm text-green-700">Successful captures</div>
                    </div>
                    
                    <div class="bg-red-50 p-3 rounded-lg text-center">
                        <div class="text-lg font-bold text-red-600">Invalid</div>
                        <div class="text-sm text-red-700">Failed attempts</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Error Handling -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Error Handling</h2>
            
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <h3 class="text-lg font-semibold mb-4">Standard Error Responses</h3>
                
                <div class="space-y-4">
                    <div class="border-l-4 border-red-400 pl-4">
                        <h4 class="font-semibold text-red-600">400 Bad Request</h4>
                        <p class="text-sm text-gray-600">Invalid admin key or malformed request</p>
                        <div class="bg-red-50 p-2 rounded mt-2 text-xs font-mono">
                            {"success": false, "error": "Invalid admin key"}
                        </div>
                    </div>
                    
                    <div class="border-l-4 border-red-400 pl-4">
                        <h4 class="font-semibold text-red-600">401 Unauthorized</h4>
                        <p class="text-sm text-gray-600">Missing or invalid authentication</p>
                        <div class="bg-red-50 p-2 rounded mt-2 text-xs font-mono">
                            {"success": false, "error": "Authentication required"}
                        </div>
                    </div>
                    
                    <div class="border-l-4 border-red-400 pl-4">
                        <h4 class="font-semibold text-red-600">404 Not Found</h4>
                        <p class="text-sm text-gray-600">Requested slug or resource does not exist</p>
                        <div class="bg-red-50 p-2 rounded mt-2 text-xs font-mono">
                            {"success": false, "error": "Slug not found"}
                        </div>
                    </div>
                    
                    <div class="border-l-4 border-red-400 pl-4">
                        <h4 class="font-semibold text-red-600">500 Internal Server Error</h4>
                        <p class="text-sm text-gray-600">Server error - check system logs</p>
                        <div class="bg-red-50 p-2 rounded mt-2 text-xs font-mono">
                            {"success": false, "error": "Internal server error"}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Security Considerations -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">Security Considerations</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-green-50 border border-green-200 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-green-800 mb-4">‚úÖ Security Features</h3>
                    <ul class="space-y-2 text-sm text-green-700">
                        <li>‚Ä¢ Admin key authentication for all endpoints</li>
                        <li>‚Ä¢ Secure memory storage for sensitive data</li>
                        <li>‚Ä¢ Encrypted communication over HTTPS</li>
                        <li>‚Ä¢ Anti-forensics cleanup operations</li>
                        <li>‚Ä¢ Intelligent decoy traffic generation</li>
                        <li>‚Ä¢ Rate limiting and abuse protection</li>
                        <li>‚Ä¢ Detailed audit logging</li>
                    </ul>
                </div>
                
                <div class="bg-yellow-50 border border-yellow-200 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-yellow-800 mb-4">‚ö†Ô∏è Best Practices</h3>
                    <ul class="space-y-2 text-sm text-yellow-700">
                        <li>‚Ä¢ Use strong, unique admin keys</li>
                        <li>‚Ä¢ Regularly rotate authentication credentials</li>
                        <li>‚Ä¢ Monitor admin endpoint access logs</li>
                        <li>‚Ä¢ Use dry run mode before destructive operations</li>
                        <li>‚Ä¢ Implement network-level access controls</li>
                        <li>‚Ä¢ Regular security audits and updates</li>
                        <li>‚Ä¢ Backup critical configuration data</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- CLI Tools -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">CLI Tools and Scripts</h2>
            
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <h3 class="text-lg font-semibold mb-4">Admin Cleanup Script</h3>
                <p class="text-gray-600 mb-4">
                    Convenient shell script for common admin operations:
                </p>
                
                <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre># Preview log cleanup (30 days retention)
./scripts/admin_cleanup.sh logs 30 --dry-run

# Clean database records older than 7 days
./scripts/admin_cleanup.sh database 7

# Emergency cleanup - delete all cleanable data
./scripts/admin_cleanup.sh all 0

# Get current system status
./scripts/admin_cleanup.sh status

# Configure decoy system
./scripts/admin_cleanup.sh decoy start --intensity 7</pre>
                </div>
                
                <div class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-400">
                    <p class="text-blue-700 text-sm">
                        <strong>Note:</strong> The CLI scripts automatically handle authentication using environment variables.
                    </p>
                </div>
            </div>
        </section>
    </div>
</body>
</html>
